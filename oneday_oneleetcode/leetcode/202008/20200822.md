---
title: 24点游戏
tags:
  - 24点游戏
sidebar: auto
---

### 24 点游戏

::: tip 难度
困难
:::

![20200822](http://qiniu.gaowenju.com/leecode/banner/20200822.jpg)

## [题目:](https://leetcode-cn.com/problems/24-game/)

你有 4 张写有 1 到 9 数字的牌。你需要判断是否能通过 \*，/，+，-，(，) 的运算得到 24。

### 示例

1. 示例 1:

```
输入: [4, 1, 8, 7]
输出: True
解释: (8-4) * (7-1) = 24
```

2. 示例 2:

```
输入: [1, 2, 1, 2]
输出: False
```

### 注意:

- 除法运算符 / 表示实数除法，而不是整数除法。例如 4 / (1 - 2/3) = 12 。
- 每个运算符对两个数进行运算。特别是我们不能用 - 作为一元运算符。例如，[1, 1, 1, 1] 作为输入时，表达式 -1 - 1 - 1 - 1 是不允许的。
- 你不能将数字连接在一起。例如，输入为 [1, 2, 1, 2] 时，不能写成 12 + 12 。

## 抛砖引玉

![抛砖引玉](http://qiniu.gaowenju.com/leecode/20200822.png)

- 二叉树递归遍历，递归依次计数+1
- 遇到 null 返回计数

### 深度优先搜索（DFS）

```javascript
/**
 * @param {number[]} nums
 * @return {boolean}
 */
var judgePoint24 = function (nums) {
  let res = false
  const diff = 10e-6

  function helper(nums) {
    if (res) return

    if (nums.length === 1 && Math.abs(nums[0] - 24) < diff) {
      res = true
      return
    }

    for (let i = 0; i < nums.length; i++) {
      for (let j = 0; j < i; j++) {
        // 从数字里面挑出两个数
        let n1 = nums[i],
          n2 = nums[j]

        // 存放计算结果，加减乘除，加和乘遵循交换律 为2种 减和除 为4种 注意除法 除数不能为0
        let next = new Set()

        next.add(n1 + n2)
        next.add(n1 - n2)
        next.add(n1 * n2)
        next.add(n2 - n1)

        if (Math.abs(n2) > diff) next.add(n1 / n2)
        if (Math.abs(n1) > diff) next.add(n2 / n1)

        // 标记一下 位置 i 和 j 的两个数已经用过
        nums[i] = 'X'
        nums[j] = 'X'

        // next 里面的数字如果有相同的，应该去重，所以用了 set
        for (let n of next) {
          let tmp = nums.filter((n) => n !== 'X')
          // 进入下一轮计算，干掉用过的两个数字，加入两个数的运行结果
          helper([n, ...tmp])
        }

        // 恢复状态
        nums[i] = n1
        nums[j] = n2
      }
    }
  }

  helper(nums)

  return res
}
```
