---
title: 有效的括号
tags:
  - 有效的括号
sidebar: auto
---

### 有效的括号

::: tip 难度
简单
:::

![20200814](http://qiniu.gaowenju.com/leecode/banner/20200814.jpg)

## [题目:](https://leetcode-cn.com/problems/valid-parentheses/)

给定一个只包括 '('，')'，'{'，'}'，'['，']'  的字符串，判断字符串是否有效。

有效字符串需满足：

左括号必须用相同类型的右括号闭合。
左括号必须以正确的顺序闭合。
注意空字符串可被认为是有效字符串。

### 示例

1. 示例 1

```
输入: "()"
输出: true
```

2. 示例 2

```
输入: "()[]{}"
输出: true
```

3. 示例 3

```
输入: "(]"
输出: false
```

4. 示例 4

```
输入: "([)]"
输出: false
```

5. 示例 5

```
输入: "{[]}"
输出: true
```

## 抛砖引玉

![抛砖引玉](http://qiniu.gaowenju.com/leecode/20200814.png)

**思路**

- 使用双指针
- 从前到后遍历
- 优先匹配最远的一个闭合标签
- (为了避免真实操作字符串)使用哈希记录已经被匹配的标签所有

**实现**

- 声明 dp 存储匹配索引：开标签->闭标签
- 遍历已匹配的不再使用

**特殊情况**

- s 长度不为偶数返回 false
- 空字符串返回 true

```javascript
/**
 * @param {string} s
 * @return {boolean}
 */
var isValid = function (s) {
  let len = s.length
  if (s === '') return true
  if (len % 2 !== 0) return false
  let msp = new Map([
      ['(', ')'],
      ['[', ']'],
      ['{', '}'],
    ]),
    dp = new Map(),
    start = 0,
    end = len
  while (start < end) {
    s.chart
  }

  const pairs = new Map([
    [')', '('],
    [']', '['],
    ['}', '{'],
  ])
  const stk = []
  s.split('').forEach((ch) => {
    if (pairs.has(ch)) {
      if (!stk.length || stk[stk.length - 1] !== pairs.get(ch)) {
        return false
      }
      stk.pop()
    } else {
      stk.push(ch)
    }
  })
  return !stk.length
}
```

### 栈

- 优先匹配最远的元素，
- 则根据栈后进先出的特性

```javascript
/**
 * @param {string} s
 * @return {boolean}
 */
var isValid = function (s) {
  let len = s.length
  if (s === '') return true
  if (len % 2 !== 0) return false

  const pairs = new Map([
    [')', '('],
    [']', '['],
    ['}', '{'],
  ])
  const stk = []
  s.split('').forEach((ch) => {
    if (pairs.has(ch)) {
      if (!stk.length || stk[stk.length - 1] !== pairs.get(ch)) {
        return false
      }
      stk.pop()
    } else {
      stk.push(ch)
    }
  })
  return !stk.length
}
```
